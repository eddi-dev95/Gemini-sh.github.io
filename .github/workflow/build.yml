name: Deploy to GitHub pages

on:
 push:
  branches:
   -main

jobs:
 buld:
   run-on: ubuntu-latest

steps:
 -name: Checkout repository
  uses: actions/checkout@v2

-name: Setup Node.js
  uses: actions/setup-node@v2
  with:
   node-version: '18'

 -name: Install dependencies
  run: npm install

 -name: Build project
  run: npm run build

-name: Insert private key
 run: echo "const PRIVATE_KEY = '$ {{ secrets.KEY }}';" > ./public/privateKey.js

  -name: Deploy to GitHub Pages
   user: peaceiris/actions-gh-pages@v3
   with: 
    github_token: ${{secrets.GITHUB_TOKEN}}
    public_dir: ./public
